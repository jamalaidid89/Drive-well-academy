<!DOCTYPE html>

<html lang="en">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover">

    <title>DW Assistant - Drive-Well Academy AI</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>

        * {

            margin: 0;

            padding: 0;

            box-sizing: border-box;

        }

        

        :root {

            --dark: #0f172a;

            --dark-soft: #1e293b;

            --dark-card: #273449;

            --red: #dc2626;

            --red-dark: #b91c1c;

            --text: #ffffff;

            --text-muted: #94a3b8;

            --text-light: #cbd5e1;

            --green: #22c55e;

            --blue: #3b82f6;

            --gold: #f59e0b;

        }

        

        body {

            font-family: 'Segoe UI', Arial, sans-serif;

            background: linear-gradient(135deg, var(--dark) 0%, var(--dark-soft) 100%);

            min-height: 100vh;

            color: var(--text);

        }

        

        .chat-container {

            max-width: 900px;

            margin: 0 auto;

            height: 100vh;

            display: flex;

            flex-direction: column;

        }

        

        .chat-header {

            background: rgba(15, 23, 42, 0.95);

            padding: 20px;

            border-bottom: 1px solid rgba(255,255,255,0.1);

            display: flex;

            align-items: center;

            gap: 15px;

        }

        

        .bot-avatar {

            width: 50px;

            height: 50px;

            background: linear-gradient(135deg, var(--red) 0%, var(--red-dark) 100%);

            border-radius: 50%;

            display: flex;

            align-items: center;

            justify-content: center;

            font-size: 24px;

            box-shadow: 0 4px 15px rgba(220, 38, 38, 0.4);

            color: white;

        }

        

        .header-info h1 {

            font-size: 20px;

            margin-bottom: 3px;

        }

        

        .header-info h1 span {

            color: var(--red);

        }

        

        .header-info p {

            color: var(--text-muted);

            font-size: 13px;

        }

        

        .header-right {

            margin-left: auto;

            display: flex;

            align-items: center;

            gap: 15px;

        }

        

        .status-badge {

            display: flex;

            align-items: center;

            gap: 6px;

            background: rgba(34, 197, 94, 0.15);

            padding: 6px 12px;

            border-radius: 20px;

            font-size: 12px;

            color: var(--green);

        }

        

        .status-dot {

            width: 8px;

            height: 8px;

            background: var(--green);

            border-radius: 50%;

            animation: pulse 2s infinite;

        }

        

        .home-btn {

            background: rgba(255,255,255,0.1);

            border: none;

            color: var(--text-muted);

            padding: 8px 15px;

            border-radius: 20px;

            font-size: 13px;

            cursor: pointer;

            text-decoration: none;

            display: flex;

            align-items: center;

            gap: 6px;

            transition: all 0.3s;

        }

        

        .home-btn:hover {

            background: var(--red);

            color: white;

        }

        

        @keyframes pulse {

            0%, 100% { opacity: 1; }

            50% { opacity: 0.5; }

        }

        

        .messages-container {

            flex: 1;

            overflow-y: auto;

            padding: 20px;

            display: flex;

            flex-direction: column;

            gap: 20px;

        }

        

        .message {

            display: flex;

            gap: 12px;

            max-width: 85%;

            animation: fadeIn 0.3s ease;

        }

        

        @keyframes fadeIn {

            from { opacity: 0; transform: translateY(10px); }

            to { opacity: 1; transform: translateY(0); }

        }

        

        .message.user {

            align-self: flex-end;

            flex-direction: row-reverse;

        }

        

        .message-avatar {

            width: 36px;

            height: 36px;

            border-radius: 50%;

            display: flex;

            align-items: center;

            justify-content: center;

            flex-shrink: 0;

            font-size: 14px;

            color: white;

        }

        

        .message.bot .message-avatar {

            background: linear-gradient(135deg, var(--red) 0%, var(--red-dark) 100%);

        }

        

        .message.user .message-avatar {

            background: var(--blue);

        }

        

        .message-content {

            background: var(--dark-card);

            padding: 14px 18px;

            border-radius: 18px;

            line-height: 1.6;

        }

        

        .message.user .message-content {

            background: var(--red);

            border-bottom-right-radius: 4px;

        }

        

        .message.bot .message-content {

            border-bottom-left-radius: 4px;

        }

        

        .message-content p {

            margin-bottom: 10px;

        }

        

        .message-content p:last-child {

            margin-bottom: 0;

        }

        

        .message-content ul, .message-content ol {

            margin: 10px 0;

            padding-left: 20px;

        }

        

        .message-content li {

            margin: 5px 0;

            color: var(--text-light);

        }

        

        .message-content strong {

            color: var(--text);

        }

        

        .message-time {

            font-size: 11px;

            color: var(--text-muted);

            margin-top: 6px;

        }

        

        .typing-indicator {

            display: flex;

            gap: 4px;

            padding: 15px 18px;

            background: var(--dark-card);

            border-radius: 18px;

            border-bottom-left-radius: 4px;

            width: fit-content;

        }

        

        .typing-indicator span {

            width: 8px;

            height: 8px;

            background: var(--text-muted);

            border-radius: 50%;

            animation: typing 1.4s infinite;

        }

        

        .typing-indicator span:nth-child(2) { animation-delay: 0.2s; }

        .typing-indicator span:nth-child(3) { animation-delay: 0.4s; }

        

        @keyframes typing {

            0%, 60%, 100% { transform: translateY(0); }

            30% { transform: translateY(-8px); }

        }

        

        .quick-actions {

            padding: 15px 20px;

            display: flex;

            gap: 10px;

            overflow-x: auto;

            border-top: 1px solid rgba(255,255,255,0.05);

            background: rgba(15, 23, 42, 0.5);

        }

        

        .quick-action {

            background: var(--dark-card);

            border: 1px solid rgba(255,255,255,0.1);

            color: var(--text-light);

            padding: 10px 16px;

            border-radius: 20px;

            font-size: 13px;

            cursor: pointer;

            white-space: nowrap;

            transition: all 0.3s;

            display: flex;

            align-items: center;

            gap: 8px;

        }

        

        .quick-action:hover {

            background: var(--red);

            border-color: var(--red);

            color: white;

        }

        

        .input-container {

            padding: 20px;

            background: rgba(15, 23, 42, 0.95);

            border-top: 1px solid rgba(255,255,255,0.1);

        }

        

        .input-wrapper {

            display: flex;

            gap: 12px;

            align-items: flex-end;

        }

        

        .input-box {

            flex: 1;

            background: var(--dark-card);

            border-radius: 25px;

            padding: 5px;

            display: flex;

            align-items: center;

            border: 1px solid rgba(255,255,255,0.1);

            transition: border-color 0.3s;

        }

        

        .input-box:focus-within {

            border-color: var(--red);

        }

        

        .input-box textarea {

            flex: 1;

            background: transparent;

            border: none;

            color: var(--text);

            padding: 12px 15px;

            font-size: 15px;

            resize: none;

            max-height: 120px;

            min-height: 24px;

            font-family: inherit;

            line-height: 1.4;

        }

        

        .input-box textarea::placeholder {

            color: var(--text-muted);

        }

        

        .input-box textarea:focus {

            outline: none;

        }

        

        .send-btn {

            width: 50px;

            height: 50px;

            border-radius: 50%;

            border: none;

            background: linear-gradient(135deg, var(--red) 0%, var(--red-dark) 100%);

            color: white;

            cursor: pointer;

            display: flex;

            align-items: center;

            justify-content: center;

            font-size: 18px;

            transition: all 0.3s;

            box-shadow: 0 4px 15px rgba(220, 38, 38, 0.4);

        }

        

        .send-btn:hover {

            transform: scale(1.05);

        }

        

        .send-btn:disabled {

            opacity: 0.5;

            cursor: not-allowed;

        }

        

        .welcome-screen {

            text-align: center;

            padding: 40px 20px;

        }

        

        .welcome-avatar {

            width: 80px;

            height: 80px;

            background: linear-gradient(135deg, var(--red) 0%, var(--red-dark) 100%);

            border-radius: 50%;

            display: flex;

            align-items: center;

            justify-content: center;

            font-size: 36px;

            margin: 0 auto 20px;

            box-shadow: 0 8px 30px rgba(220, 38, 38, 0.4);

            color: white;

        }

        

        .welcome-screen h2 {

            font-size: 28px;

            margin-bottom: 10px;

        }

        

        .welcome-screen h2 span {

            color: var(--red);

        }

        

        .welcome-screen > p {

            color: var(--text-muted);

            max-width: 500px;

            margin: 0 auto 30px;

            line-height: 1.6;

        }

        

        .feature-cards {

            display: grid;

            grid-template-columns: repeat(2, 1fr);

            gap: 15px;

            max-width: 600px;

            margin: 0 auto;

        }

        

        .feature-card {

            background: var(--dark-card);

            padding: 20px;

            border-radius: 12px;

            text-align: left;

            border: 1px solid rgba(255,255,255,0.05);

            cursor: pointer;

            transition: all 0.3s;

        }

        

        .feature-card:hover {

            border-color: var(--red);

            transform: translateY(-3px);

        }

        

        .feature-card i {

            font-size: 24px;

            color: var(--red);

            margin-bottom: 12px;

        }

        

        .feature-card h4 {

            margin-bottom: 6px;

            font-size: 15px;

            color: var(--text);

        }

        

        .feature-card p {

            font-size: 13px;

            color: var(--text-muted);

            margin: 0;

        }

        

        @media (max-width: 768px) {

            .chat-header {

                padding: 15px;

            }

            

            .header-info h1 {

                font-size: 18px;

            }

            

            .feature-cards {

                grid-template-columns: 1fr;

            }

            

            .message {

                max-width: 90%;

            }

            

            .quick-actions {

                padding: 10px 15px;

            }

            

            .input-container {

                padding: 15px;

            }

            

            .home-btn span {

                display: none;

            }

        }

        

        .messages-container::-webkit-scrollbar {

            width: 6px;

        }

        

        .messages-container::-webkit-scrollbar-track {

            background: transparent;

        }

        

        .messages-container::-webkit-scrollbar-thumb {

            background: var(--dark-card);

            border-radius: 3px;

        }

    </style>

</head>

<body>

    <div class="chat-container">

        <div class="chat-header">

            <div class="bot-avatar">

                <i class="fas fa-car"></i>

            </div>

            <div class="header-info">

                <h1>DW <span>Assistant</span></h1>

                <p>Drive-Well Academy AI â€¢ Powered by Claude</p>

            </div>

            <div class="header-right">

                <div class="status-badge">

                    <div class="status-dot"></div>

                    Online

                </div>

                <a href="index.html" class="home-btn">

                    <i class="fas fa-home"></i>

                    <span>Back to Site</span>

                </a>

            </div>

        </div>

        

        <div class="messages-container" id="messagesContainer">

            <div class="welcome-screen" id="welcomeScreen">

                <div class="welcome-avatar">

                    <i class="fas fa-car"></i>

                </div>

                <h2>Welcome to <span>DW Assistant</span></h2>

                <p>I'm your AI driving instructor assistant. I can help you with theory test questions, driving tips, booking enquiries, and much more. How can I help you today?</p>

                

                <div class="feature-cards">

                    <div class="feature-card" onclick="askQuestion('Give me a theory test question')">

                        <i class="fas fa-graduation-cap"></i>

                        <h4>Theory Test Prep</h4>

                        <p>Practice questions and study tips</p>

                    </div>

                    <div class="feature-card" onclick="askQuestion('What are your lesson prices and packages?')">

                        <i class="fas fa-pound-sign"></i>

                        <h4>Prices & Packages</h4>

                        <p>View our lesson rates</p>

                    </div>

                    <div class="feature-card" onclick="askQuestion('How many lessons do I need to pass?')">

                        <i class="fas fa-lightbulb"></i>

                        <h4>How Many Lessons?</h4>

                        <p>Get an estimate for your journey</p>

                    </div>

                    <div class="feature-card" onclick="askQuestion('How do I book a driving lesson?')">

                        <i class="fas fa-calendar-check"></i>

                        <h4>Book a Lesson</h4>

                        <p>Schedule your next lesson</p>

                    </div>

                </div>

            </div>

        </div>

        

        <div class="quick-actions">

            <button class="quick-action" onclick="askQuestion('Give me a theory test question')">

                <i class="fas fa-question-circle"></i> Theory Question

            </button>

            <button class="quick-action" onclick="askQuestion('How many lessons do I need to pass?')">

                <i class="fas fa-car"></i> How Many Lessons?

            </button>

            <button class="quick-action" onclick="askQuestion('Explain parallel parking step by step')">

                <i class="fas fa-parking"></i> Parallel Parking

            </button>

            <button class="quick-action" onclick="askQuestion('Tips for passing my driving test')">

                <i class="fas fa-check-circle"></i> Test Tips

            </button>

            <button class="quick-action" onclick="askQuestion('What areas do you cover?')">

                <i class="fas fa-map-marker-alt"></i> Coverage Area

            </button>

        </div>

        

        <div class="input-container">

            <div class="input-wrapper">

                <div class="input-box">

                    <textarea 

                        id="userInput" 

                        placeholder="Ask me anything about driving, theory tests, or our services..."

                        rows="1"

                        onkeydown="handleKeyDown(event)"

                        oninput="autoResize(this)"

                    ></textarea>

                </div>

                <button class="send-btn" onclick="sendMessage()" id="sendBtn">

                    <i class="fas fa-paper-plane"></i>

                </button>

            </div>

        </div>

    </div>



    <script>

        // ========================================

        // CONFIGURATION - API key is now securely stored on the server

        // ========================================

        

        const CONFIG = {

            companyName: 'Drive-Well Academy',

            phone: '07514 377 171',

            email: 'info@drive-well-academy.com',

            website: 'www.drive-well-academy.com',

            location: 'Bristol, UK (BS1-BS16)'

        };

        

        // System prompt - this tells Claude who it is

        const SYSTEM_PROMPT = `You are DW Assistant, the friendly AI assistant for Drive-Well Academy, a DVSA-approved driving school in Bristol, UK.



COMPANY INFORMATION:

- Name: Drive-Well Academy

- Phone: 07514 377 171

- Email: info@drive-well-academy.com

- Website: www.drive-well-academy.com

- Coverage: Bristol postcodes BS1-BS16

- Cars: Automatic and Manual available



SERVICES & PRICING:

- Standard Lessons: 2 hours

- Test Day Package: 2.5 hours (warm-up + test)

- Intensive/Crash Courses: Available

- Pass Plus: 6 hours minimum

- Block booking discounts available

- Contact for current prices



LESSON ESTIMATES:

- Average learner: 40-50 hours of professional lessons

- Quick learners: 20-30 hours

- Nervous learners: 50-70 hours

- Automatic is usually faster than manual

- Plus 20-30 hours private practice recommended

- Everyone is different - we offer assessment lessons



CANCELLATION POLICY:

- 48+ hours notice: Free reschedule

- 24-48 hours notice: 50% charge

- Less than 24 hours: Full charge



FRANCHISE OPPORTUNITIES:

- Fee: Â£50 per week (no upfront costs)

- Accept ADI (qualified) and PDI (trainee) instructors

- PDIs trained to qualify in under 6 months

- 8 weeks termination notice

- Contact: franchise@drive-well-academy.com



YOUR PERSONALITY:

- Friendly, encouraging, and patient

- Use emojis occasionally ðŸš—

- Keep responses concise but helpful

- Be positive about the learner's journey

- Safety-focused when discussing driving

- Knowledgeable about UK driving laws and DVSA



CAPABILITIES:

- Answer theory test questions (create realistic UK theory questions)

- Explain driving manoeuvres step-by-step

- Provide test tips and advice

- Answer questions about services and booking

- Help with any driving-related questions



Always encourage learners to contact Drive-Well Academy for bookings and personalised advice.`;



        let conversationHistory = [];

        let isProcessing = false;

        

        // Initialize

        document.addEventListener('DOMContentLoaded', () => {

            document.getElementById('userInput').focus();

        });

        

        function autoResize(textarea) {

            textarea.style.height = 'auto';

            textarea.style.height = Math.min(textarea.scrollHeight, 120) + 'px';

        }

        

        function handleKeyDown(event) {

            if (event.key === 'Enter' && !event.shiftKey) {

                event.preventDefault();

                sendMessage();

            }

        }

        

        function askQuestion(question) {

            document.getElementById('userInput').value = question;

            sendMessage();

        }

        

        function getCurrentTime() {

            return new Date().toLocaleTimeString('en-GB', { 

                hour: '2-digit', 

                minute: '2-digit' 

            });

        }

        

        function addMessage(content, isUser = false) {

            const welcomeScreen = document.getElementById('welcomeScreen');

            if (welcomeScreen) {

                welcomeScreen.style.display = 'none';

            }

            

            const container = document.getElementById('messagesContainer');

            const messageDiv = document.createElement('div');

            messageDiv.className = `message ${isUser ? 'user' : 'bot'}`;

            

            let formattedContent = content

                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')

                .replace(/\*(.*?)\*/g, '<em>$1</em>')

                .replace(/\n\n/g, '</p><p>')

                .replace(/\n/g, '<br>')

                .replace(/â€¢ /g, 'â€¢ ');

            

            messageDiv.innerHTML = `

                <div class="message-avatar">

                    <i class="fas ${isUser ? 'fa-user' : 'fa-car'}"></i>

                </div>

                <div>

                    <div class="message-content">

                        <p>${formattedContent}</p>

                    </div>

                    <div class="message-time">${getCurrentTime()}</div>

                </div>

            `;

            

            container.appendChild(messageDiv);

            container.scrollTop = container.scrollHeight;

        }

        

        function addTypingIndicator() {

            const container = document.getElementById('messagesContainer');

            const typingDiv = document.createElement('div');

            typingDiv.className = 'message bot';

            typingDiv.id = 'typingIndicator';

            typingDiv.innerHTML = `

                <div class="message-avatar">

                    <i class="fas fa-car"></i>

                </div>

                <div class="typing-indicator">

                    <span></span>

                    <span></span>

                    <span></span>

                </div>

            `;

            container.appendChild(typingDiv);

            container.scrollTop = container.scrollHeight;

        }

        

        function removeTypingIndicator() {

            const typing = document.getElementById('typingIndicator');

            if (typing) typing.remove();

        }

        

        async function sendMessage() {

            const input = document.getElementById('userInput');

            const message = input.value.trim();

            

            if (!message || isProcessing) return;

            

            isProcessing = true;

            document.getElementById('sendBtn').disabled = true;

            

            input.value = '';

            input.style.height = 'auto';

            

            addMessage(message, true);

            conversationHistory.push({ role: 'user', content: message });

            

            addTypingIndicator();

            

            try {

                // Call secure serverless function (API key is stored server-side)

                const response = await fetch('/api/chat', {

                    method: 'POST',

                    headers: {

                        'Content-Type': 'application/json',

                    },

                    body: JSON.stringify({

                        messages: conversationHistory,

                        systemPrompt: SYSTEM_PROMPT

                    })

                });

                

                if (!response.ok) {

                    throw new Error('API request failed');

                }

                

                const data = await response.json();

                const assistantMessage = data.content[0].text;

                

                removeTypingIndicator();

                addMessage(assistantMessage, false);

                conversationHistory.push({ role: 'assistant', content: assistantMessage });

                

            } catch (error) {

                console.error('Error:', error);

                removeTypingIndicator();

                addMessage("I'm sorry, I'm having trouble connecting right now. Please try again or contact us directly at " + CONFIG.phone, false);

            }

            

            isProcessing = false;

            document.getElementById('sendBtn').disabled = false;

            input.focus();

        }

    </script>

</body>

</html>
